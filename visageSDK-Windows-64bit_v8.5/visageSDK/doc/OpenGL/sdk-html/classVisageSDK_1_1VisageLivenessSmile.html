<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>visageSDK: VisageSDK::VisageLivenessSmile Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">visageSDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>VisageSDK</b></li><li class="navelem"><a class="el" href="classVisageSDK_1_1VisageLivenessSmile.html">VisageLivenessSmile</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classVisageSDK_1_1VisageLivenessSmile-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">VisageSDK::VisageLivenessSmile Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classVisageSDK_1_1VisageLivenessSmile.html" title="VisageLivenessSmile is a class that detects whether the person on the live video stream has smiled...">VisageLivenessSmile</a> is a class that detects whether the person on the live video stream has smiled.  
 <a href="classVisageSDK_1_1VisageLivenessSmile.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="VisageLivenessSmile_8h_source.html">VisageLivenessSmile.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for VisageSDK::VisageLivenessSmile:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classVisageSDK_1_1VisageLivenessSmile.png" usemap="#VisageSDK::VisageLivenessSmile_map" alt=""/>
  <map id="VisageSDK::VisageLivenessSmile_map" name="VisageSDK::VisageLivenessSmile_map">
<area href="classVisageSDK_1_1VisageLivenessAction.html" title="VisageLivenessAction is an abstract class that can be used to implement algorithm which searches for ..." alt="VisageSDK::VisageLivenessAction" shape="rect" coords="0,0,207,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a27b2afd6942f4bbd5e3f302b8189ba2c"><td class="memItemLeft" align="right" valign="top"><a id="a27b2afd6942f4bbd5e3f302b8189ba2c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageLivenessSmile.html#a27b2afd6942f4bbd5e3f302b8189ba2c">VisageLivenessSmile</a> ()</td></tr>
<tr class="memdesc:a27b2afd6942f4bbd5e3f302b8189ba2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor. <br /></td></tr>
<tr class="separator:a27b2afd6942f4bbd5e3f302b8189ba2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d4c0bb9bb3c7fec8d910513cd718a28"><td class="memItemLeft" align="right" valign="top"><a id="a5d4c0bb9bb3c7fec8d910513cd718a28"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageLivenessSmile.html#a5d4c0bb9bb3c7fec8d910513cd718a28">~VisageLivenessSmile</a> ()</td></tr>
<tr class="memdesc:a5d4c0bb9bb3c7fec8d910513cd718a28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br /></td></tr>
<tr class="separator:a5d4c0bb9bb3c7fec8d910513cd718a28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74cee2d6a5d765597990962e124e6baf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageLivenessSmile.html#a74cee2d6a5d765597990962e124e6baf">update</a> (const <a class="el" href="structVisageSDK_1_1FaceData.html">FaceData</a> *faceData, VsImage *frame=0)</td></tr>
<tr class="memdesc:a74cee2d6a5d765597990962e124e6baf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method that should be called for each frame until the action is verified.  <a href="#a74cee2d6a5d765597990962e124e6baf">More...</a><br /></td></tr>
<tr class="separator:a74cee2d6a5d765597990962e124e6baf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e6525530141561947d2b1fe77fd6bcb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageLivenessSmile.html#a6e6525530141561947d2b1fe77fd6bcb">reset</a> ()</td></tr>
<tr class="memdesc:a6e6525530141561947d2b1fe77fd6bcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets action.  <a href="#a6e6525530141561947d2b1fe77fd6bcb">More...</a><br /></td></tr>
<tr class="separator:a6e6525530141561947d2b1fe77fd6bcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:acba87ca4ee200071e9ec47fbfbbce42f"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageLivenessSmile.html#acba87ca4ee200071e9ec47fbfbbce42f">STATE_WAIT_FOR_FRONTAL</a> = 1</td></tr>
<tr class="memdesc:acba87ca4ee200071e9ec47fbfbbce42f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Describes action's state where face in the frame is not frontal (head rotations larger than 0.3 rad, ~17 degrees).  <a href="#acba87ca4ee200071e9ec47fbfbbce42f">More...</a><br /></td></tr>
<tr class="separator:acba87ca4ee200071e9ec47fbfbbce42f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab88a12531eae41022301c8e7a8928318"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageLivenessSmile.html#ab88a12531eae41022301c8e7a8928318">STATE_ACTION_INITIALIZING</a> = 2</td></tr>
<tr class="memdesc:ab88a12531eae41022301c8e7a8928318"><td class="mdescLeft">&#160;</td><td class="mdescRight">Describes action's state while the action is initializing, i.e.  <a href="#ab88a12531eae41022301c8e7a8928318">More...</a><br /></td></tr>
<tr class="separator:ab88a12531eae41022301c8e7a8928318"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0bed711097a0965a5bbd6ed994d4901"><td class="memItemLeft" align="right" valign="top"><a id="af0bed711097a0965a5bbd6ed994d4901"></a>
static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageLivenessSmile.html#af0bed711097a0965a5bbd6ed994d4901">STATE_WAIT_FOR_STABLE</a> = 3</td></tr>
<tr class="memdesc:af0bed711097a0965a5bbd6ed994d4901"><td class="mdescLeft">&#160;</td><td class="mdescRight">Describes action's state when user is not keeping his head still. <br /></td></tr>
<tr class="separator:af0bed711097a0965a5bbd6ed994d4901"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6520860aeb618c6ce6432e7aa97eac56"><td class="memItemLeft" align="right" valign="top"><a id="a6520860aeb618c6ce6432e7aa97eac56"></a>
static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageLivenessSmile.html#a6520860aeb618c6ce6432e7aa97eac56">STATE_WAIT_FOR_ACTION</a> = 4</td></tr>
<tr class="memdesc:a6520860aeb618c6ce6432e7aa97eac56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Describes action's state when smile is trying to be verified. <br /></td></tr>
<tr class="separator:a6520860aeb618c6ce6432e7aa97eac56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_static_attribs_classVisageSDK_1_1VisageLivenessAction"><td colspan="2" onclick="javascript:toggleInherit('pub_static_attribs_classVisageSDK_1_1VisageLivenessAction')"><img src="closed.png" alt="-"/>&#160;Static Public Attributes inherited from <a class="el" href="classVisageSDK_1_1VisageLivenessAction.html">VisageSDK::VisageLivenessAction</a></td></tr>
<tr class="memitem:a0919e2f1b6e3b25a28446576221c0391 inherit pub_static_attribs_classVisageSDK_1_1VisageLivenessAction"><td class="memItemLeft" align="right" valign="top"><a id="a0919e2f1b6e3b25a28446576221c0391"></a>
static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageLivenessAction.html#a0919e2f1b6e3b25a28446576221c0391">STATE_ACTION_VERIFIED</a> = 0</td></tr>
<tr class="memdesc:a0919e2f1b6e3b25a28446576221c0391 inherit pub_static_attribs_classVisageSDK_1_1VisageLivenessAction"><td class="mdescLeft">&#160;</td><td class="mdescRight">Describes action's state where the action was performed and verified. <br /></td></tr>
<tr class="separator:a0919e2f1b6e3b25a28446576221c0391 inherit pub_static_attribs_classVisageSDK_1_1VisageLivenessAction"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classVisageSDK_1_1VisageLivenessSmile.html" title="VisageLivenessSmile is a class that detects whether the person on the live video stream has smiled...">VisageLivenessSmile</a> is a class that detects whether the person on the live video stream has smiled. </p>
<p>In order for action to be detected accurately, it is required that the face is frontal and facial expression is neutral for 30 frames before performing smile.<br />
 During smile verification, face data from latest 30 frames ("face data sequence"), i.e. last 30 calls of <a class="el" href="classVisageSDK_1_1VisageLivenessSmile.html#a74cee2d6a5d765597990962e124e6baf" title="Method that should be called for each frame until the action is verified. ">update()</a> is used to verify head stability (STATE_WAIT_FOR_STABLE). Each time the action is reset, face data sequence will be cleared and the action will need to go through initializing state (STATE_ACTION_INITIALIZING) to store initial face data sequence. Additionally, face data sequence is used as a baseline for neutral facial expression when detecting if smile was performed. Algorithm presumes that the face will be neutral before performing smile.</p>
<p>Action should be updated for each frame in order to update its internal state. The action can be in one of the following states (states are sequentially verified in each call of <a class="el" href="classVisageSDK_1_1VisageLivenessSmile.html#a74cee2d6a5d765597990962e124e6baf" title="Method that should be called for each frame until the action is verified. ">update()</a>):</p><ol type="1">
<li><b>STATE_WAIT_FOR_FRONTAL</b> Face is not frontal. Action is reset.</li>
<li><b>STATE_ACTION_INITIALIZING</b> Action is storing first set of face data sequence. After each reset, action needs to reinitialize.</li>
<li><b>STATE_WAIT_FOR_STABLE</b> Head is not stable. In order for action to be verified successfully, the user should keep his head still.</li>
<li><b>STATE_WAIT_FOR_ACTION</b> Data is processed in order to verify smile.</li>
<li><b>STATE_ACTION_VERIFIED</b> Action is verified.</li>
</ol>

<p class="definition">Definition at line <a class="el" href="VisageLivenessSmile_8h_source.html#l00058">58</a> of file <a class="el" href="VisageLivenessSmile_8h_source.html">VisageLivenessSmile.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a6e6525530141561947d2b1fe77fd6bcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e6525530141561947d2b1fe77fd6bcb">&#9670;&nbsp;</a></span>reset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VisageSDK::VisageLivenessSmile::reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Resets action. </p>
<p>Clears face data sequence. </p>

<p>Implements <a class="el" href="classVisageSDK_1_1VisageLivenessAction.html#a0e149165d2557376cfa140281af53ff2">VisageSDK::VisageLivenessAction</a>.</p>

</div>
</div>
<a id="a74cee2d6a5d765597990962e124e6baf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74cee2d6a5d765597990962e124e6baf">&#9670;&nbsp;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int VisageSDK::VisageLivenessSmile::update </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structVisageSDK_1_1FaceData.html">FaceData</a> *&#160;</td>
          <td class="paramname"><em>faceData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VsImage *&#160;</td>
          <td class="paramname"><em>frame</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Method that should be called for each frame until the action is verified. </p>
<p>It should only be called when tracking status is TRACK_STAT_OK. Returns action's current state so appropriate message and/or image can be displayed if user interaction is required (e.g. warning for user or instruction on how to perform smile). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">faceData</td><td>face data obtained from the tracker </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>action's current state. State can be one of the following: <br />
<ul>
<li>STATE_WAIT_FOR_FRONTAL, STATE_ACTION_INITIALIZING, STATE_WAIT_FOR_STABLE, STATE_WAIT_FOR_ACTION, STATE_ACTION_VERIFIED. </li>
</ul>
</dd></dl>

<p>Implements <a class="el" href="classVisageSDK_1_1VisageLivenessAction.html#a01accb3a49e9cf9eb3db7c3297409a75">VisageSDK::VisageLivenessAction</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ab88a12531eae41022301c8e7a8928318"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab88a12531eae41022301c8e7a8928318">&#9670;&nbsp;</a></span>STATE_ACTION_INITIALIZING</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int VisageSDK::VisageLivenessSmile::STATE_ACTION_INITIALIZING = 2</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Describes action's state while the action is initializing, i.e. </p>
<p>storing initial face data sequence. After each reset, action needs to reinitialize. </p>

<p class="definition">Definition at line <a class="el" href="VisageLivenessSmile_8h_source.html#l00095">95</a> of file <a class="el" href="VisageLivenessSmile_8h_source.html">VisageLivenessSmile.h</a>.</p>

</div>
</div>
<a id="acba87ca4ee200071e9ec47fbfbbce42f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acba87ca4ee200071e9ec47fbfbbce42f">&#9670;&nbsp;</a></span>STATE_WAIT_FOR_FRONTAL</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int VisageSDK::VisageLivenessSmile::STATE_WAIT_FOR_FRONTAL = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Describes action's state where face in the frame is not frontal (head rotations larger than 0.3 rad, ~17 degrees). </p>
<p>If this state is detected, the action will be reset. </p>

<p class="definition">Definition at line <a class="el" href="VisageLivenessSmile_8h_source.html#l00089">89</a> of file <a class="el" href="VisageLivenessSmile_8h_source.html">VisageLivenessSmile.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="VisageLivenessSmile_8h_source.html">VisageLivenessSmile.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
